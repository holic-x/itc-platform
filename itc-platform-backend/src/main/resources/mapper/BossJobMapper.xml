<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.noob.module.admin.search.mapper.BossJobMapper">

    <resultMap id="BaseResultMap" type="com.noob.module.admin.search.model.entity.BossJob">
            <id property="id" column="id" jdbcType="INTEGER"/>
            <result property="name" column="name" jdbcType="VARCHAR"/>
            <result property="area" column="area" jdbcType="VARCHAR"/>
            <result property="salary" column="salary" jdbcType="VARCHAR"/>
            <result property="link" column="link" jdbcType="VARCHAR"/>
            <result property="company" column="company" jdbcType="VARCHAR"/>
            <result property="descr" column="descr" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="Base_Column_List">
        id,name,area,
        salary,link,company,
        desc
    </sql>


    <sql id="selectVO">
        SELECT
            bj.id,
            bj.name,
            bj.area,
            bj.salary,
            bj.link,
            bj.company,
            bj.descr,
            bj.createTime,
            bj.updateTime
        FROM
            boss_jd_spider_job bj
    </sql>

    <!-- 根据ID获取 -->
    <select id="getVOById" resultType="com.noob.module.admin.search.model.vo.BossJobVO" parameterType="long">
        <include refid="selectVO"></include>
        where bj.id = #{id}
    </select>

    <!-- 分页获取数据 -->
    <select id="getVOByPage" resultType="com.noob.module.admin.search.model.vo.BossJobVO" parameterType="com.noob.module.admin.search.model.dto.BossJobQueryRequest">
        <include refid="selectVO"></include>
        where 1=1
        <!-- 条件数据封装 -->
        <if test="params.name !=null and  params.name != ''">
            and bj.name like concat('%',#{params.name},'%')
        </if>
        <if test="params.area !=null and  params.area != ''">
            and bj.area like concat('%',#{params.area},'%')
        </if>
        <if test="params.company !=null and  params.company != ''">
            and bj.company like concat('%',#{params.company},'%')
        </if>
        <if test="params.desc !=null and  params.desc != ''">
            and bj.desc like concat('%',#{params.desc},'%')
        </if>
    </select>

</mapper>
